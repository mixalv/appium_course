"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.mkdocsBuild = mkdocsBuild;
exports.mkdocsServe = mkdocsServe;
exports.verifyMkdocs = verifyMkdocs;

require("source-map-support/register");

var _teen_process = require("teen_process");

const MKDOCS_VER_STR = 'version 1.';

async function verifyMkdocs() {
  try {
    const {
      stdout
    } = await (0, _teen_process.exec)('mkdocs', ['-V']);

    if (!stdout.includes(MKDOCS_VER_STR)) {
      throw new Error('version mismatch');
    }
  } catch (err) {
    throw new Error(`Could not verify mkdocs 1.x is available. Make sure it's installed ` + `and on your path. Specific error: ${err}`);
  }
}

async function mkdocsBuild(configPath, outputDir, theme = 'mkdocs') {
  await verifyMkdocs();
  await (0, _teen_process.exec)('mkdocs', ['build', '-f', configPath, '-t', theme, '-d', outputDir]);
}

async function mkdocsServe(configPath) {
  await verifyMkdocs();
  const proc = new _teen_process.SubProcess('mkdocs', ['serve', '-f', configPath]);
  await proc.start();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9ta2RvY3MuanMiXSwibmFtZXMiOlsiTUtET0NTX1ZFUl9TVFIiLCJ2ZXJpZnlNa2RvY3MiLCJzdGRvdXQiLCJpbmNsdWRlcyIsIkVycm9yIiwiZXJyIiwibWtkb2NzQnVpbGQiLCJjb25maWdQYXRoIiwib3V0cHV0RGlyIiwidGhlbWUiLCJta2RvY3NTZXJ2ZSIsInByb2MiLCJTdWJQcm9jZXNzIiwic3RhcnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBRUEsTUFBTUEsY0FBYyxHQUFHLFlBQXZCOztBQUtPLGVBQWVDLFlBQWYsR0FBK0I7QUFDcEMsTUFBSTtBQUNGLFVBQU07QUFBQ0MsTUFBQUE7QUFBRCxRQUFXLE1BQU0sd0JBQUssUUFBTCxFQUFlLENBQUMsSUFBRCxDQUFmLENBQXZCOztBQUNBLFFBQUksQ0FBQ0EsTUFBTSxDQUFDQyxRQUFQLENBQWdCSCxjQUFoQixDQUFMLEVBQXNDO0FBQ3BDLFlBQU0sSUFBSUksS0FBSixDQUFVLGtCQUFWLENBQU47QUFDRDtBQUNGLEdBTEQsQ0FLRSxPQUFPQyxHQUFQLEVBQVk7QUFDWixVQUFNLElBQUlELEtBQUosQ0FBVyxxRUFBRCxHQUNDLHFDQUFvQ0MsR0FBSSxFQURuRCxDQUFOO0FBRUQ7QUFDRjs7QUFTTSxlQUFlQyxXQUFmLENBQTRCQyxVQUE1QixFQUF3Q0MsU0FBeEMsRUFBbURDLEtBQUssR0FBRyxRQUEzRCxFQUFxRTtBQUMxRSxRQUFNUixZQUFZLEVBQWxCO0FBQ0EsUUFBTSx3QkFBSyxRQUFMLEVBQWUsQ0FBQyxPQUFELEVBQVUsSUFBVixFQUFnQk0sVUFBaEIsRUFBNEIsSUFBNUIsRUFBa0NFLEtBQWxDLEVBQXlDLElBQXpDLEVBQStDRCxTQUEvQyxDQUFmLENBQU47QUFDRDs7QUFPTSxlQUFlRSxXQUFmLENBQTRCSCxVQUE1QixFQUF3QztBQUM3QyxRQUFNTixZQUFZLEVBQWxCO0FBQ0EsUUFBTVUsSUFBSSxHQUFHLElBQUlDLHdCQUFKLENBQWUsUUFBZixFQUF5QixDQUFDLE9BQUQsRUFBVSxJQUFWLEVBQWdCTCxVQUFoQixDQUF6QixDQUFiO0FBQ0EsUUFBTUksSUFBSSxDQUFDRSxLQUFMLEVBQU47QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV4ZWMsIFN1YlByb2Nlc3MgfSBmcm9tICd0ZWVuX3Byb2Nlc3MnO1xuXG5jb25zdCBNS0RPQ1NfVkVSX1NUUiA9ICd2ZXJzaW9uIDEuJztcblxuLyoqXG4gKiBSdW4gYSB2ZXJzaW9uIGNoZWNrIG9uIHRoZSBzeXN0ZW0taW5zdGFsbGVkIG1rZG9jcyB0byBtYWtlIHN1cmUgaXQgaXMgc2V0IHVwXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlNa2RvY3MgKCkge1xuICB0cnkge1xuICAgIGNvbnN0IHtzdGRvdXR9ID0gYXdhaXQgZXhlYygnbWtkb2NzJywgWyctViddKTtcbiAgICBpZiAoIXN0ZG91dC5pbmNsdWRlcyhNS0RPQ1NfVkVSX1NUUikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndmVyc2lvbiBtaXNtYXRjaCcpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgdmVyaWZ5IG1rZG9jcyAxLnggaXMgYXZhaWxhYmxlLiBNYWtlIHN1cmUgaXQncyBpbnN0YWxsZWQgYCArXG4gICAgICAgICAgICAgICAgICAgIGBhbmQgb24geW91ciBwYXRoLiBTcGVjaWZpYyBlcnJvcjogJHtlcnJ9YCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSdW4gJ21rZG9jcyBidWlsZCcgb24gYSBwcm9qZWN0XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbmZpZ1BhdGggcGF0aCB0byBta2RvY3MgY29uZmlnIHltbFxuICogQHBhcmFtIHtzdHJpbmd9IG91dHB1dERpciBkaXJlY3RvcnkgbWtkb2NzIHNob3VsZCBidWlsZCBpbnRvXG4gKiBAcGFyYW0gez9zdHJpbmd9IHRoZW1lIHRoZW1lIG5hbWVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1rZG9jc0J1aWxkIChjb25maWdQYXRoLCBvdXRwdXREaXIsIHRoZW1lID0gJ21rZG9jcycpIHtcbiAgYXdhaXQgdmVyaWZ5TWtkb2NzKCk7XG4gIGF3YWl0IGV4ZWMoJ21rZG9jcycsIFsnYnVpbGQnLCAnLWYnLCBjb25maWdQYXRoLCAnLXQnLCB0aGVtZSwgJy1kJywgb3V0cHV0RGlyXSk7XG59XG5cbi8qKlxuICogUnVuICdta2RvY3Mgc2VydmUnIG9uIGEgcHJvamVjdFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb25maWdQYXRoIHBhdGggdG8gbWtkb2NzIGNvbmZpZyB5bWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1rZG9jc1NlcnZlIChjb25maWdQYXRoKSB7XG4gIGF3YWl0IHZlcmlmeU1rZG9jcygpO1xuICBjb25zdCBwcm9jID0gbmV3IFN1YlByb2Nlc3MoJ21rZG9jcycsIFsnc2VydmUnLCAnLWYnLCBjb25maWdQYXRoXSk7XG4gIGF3YWl0IHByb2Muc3RhcnQoKTtcbn1cbiJdfQ==